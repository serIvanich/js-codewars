<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>70</title>
  </head>

  <body>
    <div class="block"></div>

    <script>
      //kata 70

      function countSmileys(arr) {
        return arr.filter((i) => /^[;:][-~]?[D)]$/i.test(i)).length;
      }

      // console.log(countSmileys([]), 0);
      // console.log(countSmileys([":D", ":~)", ";~D", ":)"]), 4);
      // console.log(countSmileys([":)", ":(", ":D", ":O", ":;"]), 2);
      // console.log(countSmileys([";]", ":[", ";*", ":$", ";-D"]), 1);

      // kata 71

      function twoSum(numbers, target) {
        // for (let i = 0; i < numbers.length - 1; i++) {
        //   for (let j = i + 1; j < numbers.length; j++) {
        //     if (numbers[i] + numbers[j] == target) return [i, j];
        //   }
        // }

        // other way

        return numbers.reduce((newArr, el, ind, arr) => {
          let secondInd = arr.indexOf(target - el, ind + 1);
          if (secondInd >= 0 && newArr.length === 0) {
            newArr = [ind, secondInd];
          }
          return newArr;
        }, []);
      }

      // console.log(twoSum([1, 2, 3], 4), [0, 2]);
      // console.log(twoSum([1234, 5678, 9012], 14690), [1, 2]);
      // console.log(twoSum([2, 2, 3], 4), [0, 1]);
      // console.log(twoSum([2, 3, 1], 4), [1, 2]);
      // console.log(
      //   twoSum(
      //     [
      //       -271, 533, 286, 942, -28, -422, 684, 137, -5, -216, -740, -253, 993,
      //       569, -980, -53, 102, 633, -954, -190, 943, -263, 711, -996, 284,
      //       -99, 995, 746, 717, 456, 719, 525, -765, 812, 538, 222, -632, 660,
      //       709, 915, 915, -22,
      //     ],
      //     324
      //   )
      // );
      // console.log(
      //   twoSum(
      //     [
      //       -165, 129, -676, 495, -523, -93, 931, 767, -303, -813, -187, -169,
      //       -369, 467, -913, 946, 789, 989, 42, 456, -33, -897, 439, 72, 185,
      //       871, 508, 437, 780, 710, 737, 554, 327, -47, 865, -884, 897, 461,
      //       604, 127, -400, -965, 482,
      //     ],
      //     1228
      //   )
      // );

      //kata 72

      var maxSequence = function (arr, maxSum = 0) {
        // one way
        // for (let i = 0; i < arr.length; i++) {
        //   if (arr[i] > 0 && (i === 0 || arr[i - 1] < 0)) {
        //     if (i === arr.length - 1) {
        //       if (maxSum < arr[i]) {
        //         maxSum = arr[i];
        //       }
        //     }
        //     for (let j = i + 1; j < arr.length; j++) {
        //       if (arr[j] < 0 || (arr[j] > 0 && j === arr.length - 1)) {
        //         let currentSum = arr
        //           .slice(i, arr[j] < 0 ? j : j + 1)
        //           .reduce((sum, num) => (sum += num));
        //         if (maxSum < currentSum) {
        //           maxSum = currentSum;
        //         }
        //       }
        //     }
        //   }
        // }

        //other way
        // arr.forEach((num, ind) => {
        //   if (num > 0 && (ind === 0 || arr[ind - 1] < 0)) {
        //     if (ind === arr.length - 1) {
        //       maxSum = maxSum < num ? num : maxSum;
        //     }
        //     for (let j = ind + 1; j < arr.length; j++) {
        //       if (arr[j] < 0 || (arr[j] > 0 && j === arr.length - 1)) {
        //         let currentSum = arr
        //           .slice(ind, arr[j] < 0 ? j : j + 1)
        //           .reduce((sum, num) => (sum += num));
        //         maxSum = maxSum < currentSum ? currentSum : maxSum;
        //       }
        //     }
        //   }
        // });
        // return maxSum;

        // and the best way
        let currentSum = 0,
          highestMax = 0;
        arr.forEach((number) => {
          currentSum = Math.max(0, currentSum + number);
          highestMax = Math.max(currentSum, highestMax);
        });
        return highestMax;
      };
      // console.log(maxSequence([]), 0);
      // console.log(maxSequence([-2, 1, -3, 4, -1, 2, 1, -5, 4]), 6);
      // console.log(
      //   maxSequence([
      //     7, 4, 11, -11, 39, 36, 10, -6, 37, -10, -32, 44, -26, -34, 43, 43,
      //   ]),
      //   155
      // );
      console.log(
        maxSequence([
          -28, 47, -21, -32, 5, -32, 35, -7, -37, 20, 22, -39, 37, 21, -29, 40,
          17, 4, -44, 26, -1, -17, 24, 21, 17, 14, -43, -3, -28, 33, 2, -4, 28,
          47, -33, -13, -2, 40, -30, -50, -47, -32, -18, -17, 0, 46, 6, 29, -49,
          -9, 47, -18, 4, 25, 39, 50, -36, -35, -2, 31, 18, 16, 49, -19, -1, 30,
        ]),
        221
      );
      console.log(maxSequence([5, -9, -15, 14, -44, 5, -26, -3, 47]), 47);
    </script>
  </body>
</html>
